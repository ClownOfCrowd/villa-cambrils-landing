// Enhanced Chatbot Knowledge Base with PDF data integration
export const villaKnowledgeBase = {
  es: {
    property: {
      price: "1.499.990 ‚Ç¨",
      size: "805 m¬≤",
      bedrooms: "6 dormitorios",
      bathrooms: "5 ba√±os",
      features: [
        "Piscina privada con zona de relax",
        "Jard√≠n mediterr√°neo de 400m¬≤", 
        "Aire acondicionado central",
        "Calefacci√≥n por suelo radiante",
        "Garaje para 3 veh√≠culos",
        "Terraza panor√°mica de 150m¬≤",
        "Cocina americana totalmente equipada",
        "Sistema de dom√≥tica integrado",
        "Alarma y videovigilancia"
      ],
      location: "Jardins Vilafortuny, Cambrils",
      beach_distance: "1,4 km a la playa (5 minutos en coche, 20 minutos andando)",
      portaventura: "15 minutos en coche a PortAventura",
      year_built: "2020",
      energy_rating: "Certificaci√≥n energ√©tica A",
      orientation: "Sur-Este (m√°xima luminosidad)",
      plot_size: "1.200 m¬≤ de parcela"
    },
    advantages: [
      "Ubicaci√≥n privilegiada en zona residencial tranquila",
      "Excelente conectividad con autopistas AP-7 y N-340",
      "Cerca de centros comerciales y restaurantes",
      "Zona verde con espacios naturales protegidos",
      "Transporte p√∫blico directo a Barcelona y Tarragona",
      "Comunidad segura con vigilancia 24h",
      "Proximidad a colegios internacionales",
      "Campo de golf a 10 minutos"
    ],
    technical_specs: {
      construction: "Estructura de hormig√≥n armado",
      roof: "Cubierta plana transitable",
      windows: "Ventanas de PVC con doble acristalamiento",
      flooring: "Gres porcel√°nico y parquet en dormitorios",
      insulation: "Aislamiento t√©rmico y ac√∫stico superior",
      utilities: "Instalaciones de fontaner√≠a y electricidad certificadas"
    },
    legal_info: {
      license: "Licencia de primera ocupaci√≥n vigente",
      taxes: "IBI: 2.400‚Ç¨/a√±o aproximadamente",
      community: "Gastos de comunidad: 150‚Ç¨/mes",
      documentation: "Toda la documentaci√≥n legal en regla"
    }
  },
  en: {
    property: {
      price: "‚Ç¨1,499,990",
      size: "805 m¬≤",
      bedrooms: "6 bedrooms",
      bathrooms: "5 bathrooms",
      features: [
        "Private pool with relaxation area",
        "400m¬≤ Mediterranean garden",
        "Central air conditioning",
        "Underfloor heating",
        "3-car garage",
        "150m¬≤ panoramic terrace",
        "Fully equipped open-plan kitchen",
        "Integrated home automation system",
        "Security alarm and video surveillance"
      ],
      location: "Jardins Vilafortuny, Cambrils",
      beach_distance: "1.4 km to beach (5 minutes by car, 20 minutes walking)",
      portaventura: "15 minutes by car to PortAventura",
      year_built: "2020",
      energy_rating: "Energy rating A",
      orientation: "South-East (maximum brightness)",
      plot_size: "1,200 m¬≤ plot"
    },
    advantages: [
      "Privileged location in quiet residential area",
      "Excellent highway connectivity AP-7 and N-340",
      "Close to shopping centers and restaurants",
      "Green areas with protected natural spaces",
      "Direct public transport to Barcelona and Tarragona",
      "Safe community with 24h security",
      "Proximity to international schools",
      "Golf course 10 minutes away"
    ],
    technical_specs: {
      construction: "Reinforced concrete structure",
      roof: "Accessible flat roof",
      windows: "PVC windows with double glazing",
      flooring: "Porcelain stoneware and parquet in bedrooms",
      insulation: "Superior thermal and acoustic insulation",
      utilities: "Certified plumbing and electrical installations"
    },
    legal_info: {
      license: "Valid first occupancy license",
      taxes: "Property tax: approximately ‚Ç¨2,400/year",
      community: "Community fees: ‚Ç¨150/month",
      documentation: "All legal documentation in order"
    }
  },
  ca: {
    property: {
      price: "1.499.990 ‚Ç¨",
      size: "805 m¬≤",
      bedrooms: "6 habitacions",
      bathrooms: "5 banys",
      features: [
        "Piscina privada amb zona de relax",
        "Jard√≠ mediterrani de 400m¬≤",
        "Aire condicionat central",
        "Calefacci√≥ per terra radiant",
        "Garatge per a 3 vehicles",
        "Terrassa panor√†mica de 150m¬≤",
        "Cuina americana completament equipada",
        "Sistema de dom√≤tica integrat",
        "Alarma i videovigil√†ncia"
      ],
      location: "Jardins Vilafortuny, Cambrils",
      beach_distance: "1,4 km a la platja (5 minuts amb cotxe, 20 minuts caminant)",
      portaventura: "15 minuts amb cotxe a PortAventura",
      year_built: "2020",
      energy_rating: "Certificaci√≥ energ√®tica A",
      orientation: "Sud-Est (m√†xima lluminositat)",
      plot_size: "1.200 m¬≤ de parcel¬∑la"
    },
    advantages: [
      "Ubicaci√≥ privilegiada en zona residencial tranquil¬∑la",
      "Excel¬∑lent connectivitat amb autopistes AP-7 i N-340",
      "A prop de centres comercials i restaurants",
      "Zona verda amb espais naturals protegits",
      "Transport p√∫blic directe a Barcelona i Tarragona",
      "Comunitat segura amb vigil√†ncia 24h",
      "Proximitat a col¬∑legis internacionals",
      "Camp de golf a 10 minuts"
    ],
    technical_specs: {
      construction: "Estructura de formig√≥ armat",
      roof: "Coberta plana transitable",
      windows: "Finestres de PVC amb doble vidre",
      flooring: "Gres porcell√†nic i parquet en dormitoris",
      insulation: "A√Øllament t√®rmic i ac√∫stic superior",
      utilities: "Instal¬∑lacions de fontaneria i electricitat certificades"
    },
    legal_info: {
      license: "Llic√®ncia de primera ocupaci√≥ vigent",
      taxes: "IBI: 2.400‚Ç¨/any aproximadament",
      community: "Despeses de comunitat: 150‚Ç¨/mes",
      documentation: "Tota la documentaci√≥ legal en regla"
    }
  },
  ru: {
    property: {
      price: "1.499.990 ‚Ç¨",
      size: "805 –º¬≤",
      bedrooms: "6 —Å–ø–∞–ª–µ–Ω",
      bathrooms: "5 –≤–∞–Ω–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç",
      features: [
        "–ß–∞—Å—Ç–Ω—ã–π –±–∞—Å—Å–µ–π–Ω —Å –∑–æ–Ω–æ–π –æ—Ç–¥—ã—Ö–∞",
        "–°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∏–π —Å–∞–¥ 400–º¬≤",
        "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ",
        "–¢–µ–ø–ª—ã–π –ø–æ–ª",
        "–ì–∞—Ä–∞–∂ –Ω–∞ 3 –∞–≤—Ç–æ–º–æ–±–∏–ª—è",
        "–ü–∞–Ω–æ—Ä–∞–º–Ω–∞—è —Ç–µ—Ä—Ä–∞—Å–∞ 150–º¬≤",
        "–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–Ω–∞—è –∫—É—Ö–Ω—è-—Å—Ç—É–¥–∏—è",
        "–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–º–Ω—ã–π –¥–æ–º",
        "–°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ"
      ],
      location: "–ñ–∞—Ä–¥–∏–Ω—Å –í–∏–ª–∞—Ñ–æ—Ä—Ç—É–Ω–∏, –ö–∞–º–±—Ä–∏–ª—Å",
      beach_distance: "1,4 –∫–º –¥–æ –ø–ª—è–∂–∞ (5 –º–∏–Ω—É—Ç –Ω–∞ –º–∞—à–∏–Ω–µ, 20 –º–∏–Ω—É—Ç –ø–µ—à–∫–æ–º)",
      portaventura: "15 –º–∏–Ω—É—Ç –Ω–∞ –º–∞—à–∏–Ω–µ –¥–æ –ü–æ—Ä—Ç-–ê–≤–µ–Ω—Ç—É—Ä—ã",
      year_built: "2020",
      energy_rating: "–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å A",
      orientation: "–Æ–≥–æ-–í–æ—Å—Ç–æ–∫ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç—å)",
      plot_size: "–£—á–∞—Å—Ç–æ–∫ 1.200 –º¬≤"
    },
    advantages: [
      "–ü—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–∏—Ö–æ–º –∂–∏–ª–æ–º —Ä–∞–π–æ–Ω–µ",
      "–û—Ç–ª–∏—á–Ω–∞—è —Å–≤—è–∑—å —Å –∞–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª—è–º–∏ AP-7 –∏ N-340",
      "–†—è–¥–æ–º —Ç–æ—Ä–≥–æ–≤—ã–µ —Ü–µ–Ω—Ç—Ä—ã –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã",
      "–ó–µ–ª–µ–Ω–∞—è –∑–æ–Ω–∞ —Å –æ—Ö—Ä–∞–Ω—è–µ–º—ã–º–∏ –ø—Ä–∏—Ä–æ–¥–Ω—ã–º–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º–∏",
      "–ü—Ä—è–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ë–∞—Ä—Å–µ–ª–æ–Ω–æ–π –∏ –¢–∞—Ä—Ä–∞–≥–æ–Ω–æ–π",
      "–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Å –æ—Ö—Ä–∞–Ω–æ–π 24—á",
      "–ë–ª–∏–∑–æ—Å—Ç—å –∫ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º —à–∫–æ–ª–∞–º",
      "–ü–æ–ª–µ –¥–ª—è –≥–æ–ª—å—Ñ–∞ –≤ 10 –º–∏–Ω—É—Ç–∞—Ö"
    ],
    technical_specs: {
      construction: "–ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è",
      roof: "–ü–ª–æ—Å–∫–∞—è —ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä—É–µ–º–∞—è –∫—Ä–æ–≤–ª—è",
      windows: "–ü–í–• –æ–∫–Ω–∞ —Å –¥–≤–æ–π–Ω—ã–º –æ—Å—Ç–µ–∫–ª–µ–Ω–∏–µ–º",
      flooring: "–ö–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç –∏ –ø–∞—Ä–∫–µ—Ç –≤ —Å–ø–∞–ª—å–Ω—è—Ö",
      insulation: "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–∞—è —Ç–µ–ø–ª–æ- –∏ –∑–≤—É–∫–æ–∏–∑–æ–ª—è—Ü–∏—è",
      utilities: "–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–¥–æ–ø—Ä–æ–≤–æ–¥ –∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ"
    },
    legal_info: {
      license: "–î–µ–π—Å—Ç–≤—É—é—â–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞—Å–µ–ª–µ–Ω–∏—è",
      taxes: "–ù–∞–ª–æ–≥ –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å: –ø—Ä–∏–º–µ—Ä–Ω–æ 2.400‚Ç¨/–≥–æ–¥",
      community: "–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã: 150‚Ç¨/–º–µ—Å—è—Ü",
      documentation: "–í—Å—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ"
    }
  }
};

// Enhanced response patterns for better AI understanding
export const responsePatterns = {
  price: ['precio', 'price', 'preu', '—Ü–µ–Ω–∞', '—Å—Ç–æ–∏–º–æ—Å—Ç—å', 'cost', 'coste', 'vale', 'cuesta'],
  size: ['tama√±o', 'metros', 'size', 'mida', '—Ä–∞–∑–º–µ—Ä', '–ø–ª–æ—â–∞–¥—å', 'surface', 'superficie', 'm2'],
  bedrooms: ['dormitorios', 'habitaciones', 'bedrooms', 'habitacions', '—Å–ø–∞–ª—å–Ω–∏', '–∫–æ–º–Ω–∞—Ç', 'cuartos'],
  bathrooms: ['ba√±os', 'bathrooms', 'banys', '–≤–∞–Ω–Ω', '—Ç—É–∞–ª–µ—Ç', 'wc', 'aseos'],
  location: ['ubicaci√≥n', 'donde', 'location', 'where', 'ubicaci√≥', 'on', '–≥–¥–µ', '—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ', 'sitio'],
  beach: ['playa', 'beach', 'platja', '–ø–ª—è–∂', '–º–æ—Ä–µ', 'mar', 'costa'],
  pool: ['piscina', 'pool', '–±–∞—Å—Å–µ–π–Ω', 'swimming'],
  parking: ['parking', 'garaje', 'garage', 'p√†rquing', '–ø–∞—Ä–∫–æ–≤–∫–∞', 'aparcamiento'],
  portaventura: ['portaventura', 'port aventura', '–ø–∞—Ä–∫ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π', 'parque', 'atracciones'],
  garden: ['jard√≠n', 'garden', 'jard√≠', '—Å–∞–¥', 'verde', 'plantas'],
  year: ['a√±o', 'cuando', 'construido', 'year', 'built', 'any', 'constru√Øt', '–≥–æ–¥', '–ø–æ—Å—Ç—Ä–æ–µ–Ω'],
  energy: ['energ√©tica', 'energy', 'energ√®tica', '—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π', 'eficiencia', '–∫–ª–∞—Å—Å'],
  legal: ['legal', 'documentos', 'papers', 'documents', '–¥–æ–∫—É–º–µ–Ω—Ç—ã', '–ª–∏—Ü–µ–Ω–∑–∏—è', 'papers'],
  taxes: ['impuestos', 'taxes', 'impostos', '–Ω–∞–ª–æ–≥–∏', 'ibi', 'gastos'],
  technical: ['t√©cnico', 'technical', 't√®cnic', '—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π', 'construcci√≥n', 'materials'],
  investment: ['inversi√≥n', 'investment', 'inversi√≥', '–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è', 'rentabilidad', 'negocio']
};

// Context-aware response generator
export const generateEnhancedResponse = (userMessage, language) => {
  const knowledge = villaKnowledgeBase[language];
  const lowerMessage = userMessage.toLowerCase();
  
  // Multi-pattern matching for better accuracy
  const matchedPatterns = Object.entries(responsePatterns).filter(([key, patterns]) =>
    patterns.some(pattern => lowerMessage.includes(pattern))
  );

  if (matchedPatterns.length === 0) {
    return getFallbackResponse(language);
  }

  // Generate contextual responses based on matched patterns
  const responses = {
    es: generateSpanishResponse(matchedPatterns, knowledge, lowerMessage),
    en: generateEnglishResponse(matchedPatterns, knowledge, lowerMessage),
    ca: generateCatalanResponse(matchedPatterns, knowledge, lowerMessage),
    ru: generateRussianResponse(matchedPatterns, knowledge, lowerMessage)
  };

  return responses[language] || getFallbackResponse(language);
};

// Language-specific response generators
function generateSpanishResponse(patterns, knowledge, message) {
  const patternTypes = patterns.map(([type]) => type);
  
  if (patternTypes.includes('price')) {
    return `üí∞ El precio de esta exclusiva villa es de **${knowledge.property.price}**. Incluye ${knowledge.property.size} de superficie construida en una parcela de ${knowledge.property.plot_size}. La propiedad est√° construida en ${knowledge.property.year_built} con certificaci√≥n energ√©tica ${knowledge.property.energy_rating}.`;
  }
  
  if (patternTypes.includes('size')) {
    return `üìê La villa tiene **${knowledge.property.size}** de superficie construida en una parcela de **${knowledge.property.plot_size}**. Est√° perfectamente distribuida con ${knowledge.property.bedrooms} y ${knowledge.property.bathrooms}, adem√°s de amplias zonas comunes y terraza panor√°mica de 150m¬≤.`;
  }
  
  if (patternTypes.includes('bedrooms')) {
    return `üõèÔ∏è La propiedad cuenta con **${knowledge.property.bedrooms}** amplios y luminosos, cada uno con acceso a terraza o balc√≥n. Todas las habitaciones tienen suelo de parquet y ventanas de PVC con doble acristalamiento para m√°ximo confort.`;
  }
  
  if (patternTypes.includes('location') || patternTypes.includes('beach')) {
    return `üèñÔ∏è Ubicada en **${knowledge.property.location}**, una zona premium de la Costa Dorada. **${knowledge.property.beach_distance}** y ${knowledge.property.portaventura}. La zona cuenta con excelente conectividad a Barcelona y Tarragona.`;
  }
  
  if (patternTypes.includes('pool') || patternTypes.includes('garden')) {
    return `üèä‚Äç‚ôÇÔ∏è S√≠, incluye una **piscina privada** con zona de relax en un precioso **jard√≠n mediterr√°neo de 400m¬≤**. El jard√≠n est√° dise√±ado con plantas aut√≥ctonas que requieren poco mantenimiento y proporcionan privacidad total.`;
  }
  
  if (patternTypes.includes('technical')) {
    return `üîß **Especificaciones t√©cnicas:** ${knowledge.technical_specs.construction}, ${knowledge.technical_specs.roof}, ${knowledge.technical_specs.windows}. Cuenta con ${knowledge.technical_specs.insulation} y ${knowledge.technical_specs.utilities}.`;
  }
  
  if (patternTypes.includes('legal') || patternTypes.includes('taxes')) {
    return `üìã **Informaci√≥n legal:** ${knowledge.legal_info.license}. ${knowledge.legal_info.taxes}, ${knowledge.legal_info.community}. ${knowledge.legal_info.documentation}.`;
  }
  
  return getFallbackResponse('es');
}

function generateEnglishResponse(patterns, knowledge, message) {
  const patternTypes = patterns.map(([type]) => type);
  
  if (patternTypes.includes('price')) {
    return `üí∞ The price of this exclusive villa is **${knowledge.property.price}**. It includes ${knowledge.property.size} of built surface on a ${knowledge.property.plot_size}. The property was built in ${knowledge.property.year_built} with ${knowledge.property.energy_rating}.`;
  }
  
  if (patternTypes.includes('size')) {
    return `üìê The villa has **${knowledge.property.size}** of built surface on a **${knowledge.property.plot_size}**. It's perfectly distributed with ${knowledge.property.bedrooms} and ${knowledge.property.bathrooms}, plus spacious common areas and a 150m¬≤ panoramic terrace.`;
  }
  
  if (patternTypes.includes('bedrooms')) {
    return `üõèÔ∏è The property features **${knowledge.property.bedrooms}** spacious and bright rooms, each with access to terrace or balcony. All bedrooms have parquet flooring and PVC windows with double glazing for maximum comfort.`;
  }
  
  if (patternTypes.includes('location') || patternTypes.includes('beach')) {
    return `üèñÔ∏è Located in **${knowledge.property.location}**, a premium area of Costa Dorada. **${knowledge.property.beach_distance}** and ${knowledge.property.portaventura}. The area has excellent connectivity to Barcelona and Tarragona.`;
  }
  
  if (patternTypes.includes('pool') || patternTypes.includes('garden')) {
    return `üèä‚Äç‚ôÇÔ∏è Yes, it includes a **private pool** with relaxation area in a beautiful **400m¬≤ Mediterranean garden**. The garden is designed with native plants requiring little maintenance and providing total privacy.`;
  }
  
  return getFallbackResponse('en');
}

function generateCatalanResponse(patterns, knowledge, message) {
  const patternTypes = patterns.map(([type]) => type);
  
  if (patternTypes.includes('price')) {
    return `üí∞ El preu d'aquesta vil¬∑la exclusiva √©s de **${knowledge.property.price}**. Inclou ${knowledge.property.size} de superf√≠cie constru√Øda en una parcel¬∑la de ${knowledge.property.plot_size}. La propietat est√† constru√Øda el ${knowledge.property.year_built} amb ${knowledge.property.energy_rating}.`;
  }
  
  if (patternTypes.includes('location') || patternTypes.includes('beach')) {
    return `üèñÔ∏è Ubicada a **${knowledge.property.location}**, una zona premium de la Costa Daurada. **${knowledge.property.beach_distance}** i ${knowledge.property.portaventura}. La zona compta amb excel¬∑lent connectivitat a Barcelona i Tarragona.`;
  }
  
  return getFallbackResponse('ca');
}

function generateRussianResponse(patterns, knowledge, message) {
  const patternTypes = patterns.map(([type]) => type);
  
  if (patternTypes.includes('price')) {
    return `üí∞ –¶–µ–Ω–∞ —ç—Ç–æ–π —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–π –≤–∏–ª–ª—ã —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç **${knowledge.property.price}**. –í–∫–ª—é—á–∞–µ—Ç ${knowledge.property.size} –∑–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–ª–æ—â–∞–¥–∏ –Ω–∞ —É—á–∞—Å—Ç–∫–µ ${knowledge.property.plot_size}. –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –≤ ${knowledge.property.year_built} –≥–æ–¥—É —Å ${knowledge.property.energy_rating}.`;
  }
  
  if (patternTypes.includes('location') || patternTypes.includes('beach')) {
    return `üèñÔ∏è –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –≤ **${knowledge.property.location}**, –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–º —Ä–∞–π–æ–Ω–µ –ö–æ—Å—Ç–∞-–î–æ—Ä–∞–¥–∞. **${knowledge.property.beach_distance}** –∏ ${knowledge.property.portaventura}. –í —Ä–∞–π–æ–Ω–µ –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ë–∞—Ä—Å–µ–ª–æ–Ω–æ–π –∏ –¢–∞—Ä—Ä–∞–≥–æ–Ω–æ–π.`;
  }
  
  return getFallbackResponse('ru');
}

function getFallbackResponse(language) {
  const fallbacks = {
    es: `Gracias por tu consulta sobre esta magn√≠fica villa. Para informaci√≥n m√°s detallada y personalizada, no dudes en contactarnos:\n\nüì± **WhatsApp:** +34 677 743 005\nüìß **Email:** info@inmolarisa.com\n\n¬°Estaremos encantados de resolver todas tus dudas y organizar una visita!`,
    en: `Thank you for your inquiry about this magnificent villa. For more detailed and personalized information, please don't hesitate to contact us:\n\nüì± **WhatsApp:** +34 677 743 005\nüìß **Email:** info@inmolarisa.com\n\nWe'll be happy to answer all your questions and arrange a viewing!`,
    ca: `Gr√†cies per la teva consulta sobre aquesta magn√≠fica vil¬∑la. Per a informaci√≥ m√©s detallada i personalitzada, no dubtis a contactar-nos:\n\nüì± **WhatsApp:** +34 677 743 005\nüìß **Email:** info@inmolarisa.com\n\nEstarem encantats de resoldre tots els teus dubtes i organitzar una visita!`,
    ru: `–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –∑–∞–ø—Ä–æ—Å –æ–± —ç—Ç–æ–π –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ–π –≤–∏–ª–ª–µ. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:\n\nüì± **WhatsApp:** +34 677 743 005\nüìß **Email:** info@inmolarisa.com\n\n–ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä!`
  };
  
  return fallbacks[language] || fallbacks.es;
}
